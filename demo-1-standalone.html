<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#ff1744">
    <title>LiveStream Tips - Find Streamers</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #000;
            color: #fff;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Header */
        .header {
            position: sticky;
            top: 0;
            background: linear-gradient(135deg, #ff1744, #c62828);
            padding: 14px 16px;
            z-index: 100;
            box-shadow: 0 4px 16px rgba(255, 23, 68, 0.5);
            border-bottom: 2px solid #ffc107;
        }
        
        .header h1 {
            font-size: 22px;
            font-weight: 900;
            color: #fff;
            margin-bottom: 12px;
        }
        
        /* Search Bar */
        .search-container {
            position: relative;
        }
        
        .search-bar {
            width: 100%;
            background: rgba(0,0,0,0.3);
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 12px 16px;
            font-size: 16px;
            color: #fff;
            outline: none;
        }
        
        .search-bar::placeholder {
            color: #ff8a80;
        }
        
        .search-bar:focus {
            border-color: #ff1744;
            box-shadow: 0 0 12px rgba(255, 23, 68, 0.4);
        }
        
        /* Search Dropdown */
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #1a0a0a;
            border: 2px solid #ffc107;
            border-radius: 12px;
            margin-top: 8px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
            box-shadow: 0 8px 24px rgba(0,0,0,0.8);
        }
        
        .search-results.visible {
            display: block;
        }
        
        .search-category {
            padding: 12px 16px 8px;
            font-size: 12px;
            font-weight: 900;
            text-transform: uppercase;
            color: #ff8a80;
            border-bottom: 1px solid #2a2020;
        }
        
        .search-item {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            border-bottom: 1px solid #2a2020;
            transition: all 0.2s;
        }
        
        .search-item:active {
            background: rgba(255, 23, 68, 0.2);
        }
        
        .search-icon {
            font-size: 20px;
            width: 24px;
            text-align: center;
        }
        
        .search-item-info {
            flex: 1;
        }
        
        .search-item-name {
            font-size: 15px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 2px;
        }
        
        .search-item-meta {
            font-size: 12px;
            color: #ff8a80;
        }
        
        .search-live-badge {
            background: #ff1744;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 900;
            border: 1px solid #ffc107;
        }
        
        .no-results {
            padding: 32px 16px;
            text-align: center;
            color: #666;
        }
        
        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 24px;
            padding: 16px;
            background: rgba(255, 23, 68, 0.1);
            border-bottom: 1px solid #2a2020;
        }
        
        .stat {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .stat-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .stat.live { color: #ff1744; font-weight: 700; }
        .stat.offline { color: #888; }
        .stat.clubs { color: #ffc107; font-weight: 700; }
        
        /* State Grid */
        .state-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 16px;
            padding-bottom: 100px;
        }
        
        @media (min-width: 768px) {
            .state-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .state-grid {
                grid-template-columns: repeat(4, 1fr);
                max-width: 1200px;
                margin: 0 auto;
            }
        }
        
        .state-card {
            background: #1a0a0a;
            border: 2px solid #2a2020;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .state-card:active {
            transform: scale(0.98);
            border-color: #ff1744;
            box-shadow: 0 8px 24px rgba(255, 23, 68, 0.4);
        }
        
        .state-card.has-live {
            border-color: #ff1744;
            background: rgba(255, 23, 68, 0.1);
        }
        
        .state-name {
            font-size: 16px;
            font-weight: 900;
            margin-bottom: 8px;
            color: #fff;
        }
        
        .state-card.has-live .state-name {
            color: #ff1744;
        }
        
        .state-counts {
            display: flex;
            gap: 12px;
            font-size: 13px;
        }
        
        .count-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .count-live {
            color: #ff1744;
            font-weight: 900;
        }
        
        .count-offline {
            color: #666;
        }
        
        .state-clubs {
            margin-top: 8px;
            font-size: 11px;
            color: #ffc107;
            font-weight: 700;
        }
        
        /* Bottom Sheet */
        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 199;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .overlay.visible {
            opacity: 1;
            pointer-events: all;
        }
        
        .bottom-sheet {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #1a0a0a;
            border-top: 3px solid #ffc107;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            max-height: 80vh;
            transform: translateY(100%);
            transition: transform 0.3s;
            z-index: 200;
            box-shadow: 0 -6px 24px rgba(255, 23, 68, 0.4);
            overflow-y: auto;
        }
        
        .bottom-sheet.open {
            transform: translateY(0);
        }
        
        .sheet-handle {
            width: 40px;
            height: 4px;
            background: #ff1744;
            border-radius: 2px;
            margin: 12px auto 16px;
            box-shadow: 0 0 8px #ff1744;
        }
        
        .sheet-header {
            padding: 0 20px 16px;
            border-bottom: 1px solid #2a2020;
            position: relative;
        }
        
        .sheet-title {
            font-size: 22px;
            font-weight: 900;
            color: #ff1744;
            margin-bottom: 4px;
        }
        
        .sheet-subtitle {
            font-size: 13px;
            color: #ff8a80;
        }
        
        .back-btn {
            background: linear-gradient(135deg, #ff1744, #c62828);
            border: 2px solid #ffc107;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            font-weight: 900;
            cursor: pointer;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .sheet-content {
            padding: 20px;
        }
        
        /* Items */
        .item {
            padding: 16px;
            background: #000;
            border-radius: 12px;
            margin-bottom: 12px;
            border-left: 3px solid #2a2020;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .item:active {
            transform: scale(0.98);
            border-left-color: #ff1744;
            box-shadow: 0 4px 12px rgba(255, 23, 68, 0.3);
        }
        
        .item.live {
            border-left-color: #ff1744;
            background: #1a0a0a;
        }
        
        .item-name {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .item-name.live {
            color: #ff1744;
        }
        
        .item-status {
            font-size: 12px;
            color: #666;
        }
        
        .live-badge {
            background: linear-gradient(135deg, #ff1744, #c62828);
            color: white;
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 6px;
            border: 1px solid #ffc107;
            box-shadow: 0 2px 8px rgba(255, 23, 68, 0.4);
        }
        
        .pulse-dot {
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }
        
        /* Streamer Items */
        .streamer-item {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .streamer-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 900;
            color: white;
            flex-shrink: 0;
        }
        
        .streamer-avatar.live {
            border: 3px solid #ffc107;
            box-shadow: 0 0 12px #ffc107;
        }
        
        .streamer-avatar.offline {
            border: 2px solid #666;
            filter: grayscale(50%);
        }
        
        .streamer-info {
            flex: 1;
        }
        
        .streamer-name {
            font-size: 16px;
            font-weight: 900;
            margin-bottom: 2px;
        }
        
        .streamer-name.live {
            color: #ff1744;
        }
        
        .streamer-name.offline {
            color: #888;
        }
        
        .streamer-viewers {
            font-size: 12px;
            color: #ff8a80;
        }
        
        .streamer-icon {
            font-size: 24px;
        }
        
        .section-header {
            font-size: 14px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 24px 0 12px;
        }
        
        .section-header.live {
            color: #ff1744;
        }
        
        .section-header.offline {
            color: #666;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üíé Find Streamers</h1>
        <div class="search-container">
            <input 
                type="text" 
                class="search-bar" 
                id="searchBar"
                placeholder="üîç Search states, clubs, or streamers..."
                autocomplete="off"
            >
            <div class="search-results" id="searchResults"></div>
        </div>
    </div>

    <div class="stats-bar" id="statsBar">
        <div class="stat live">
            <div class="stat-dot" style="background: #ff1744; box-shadow: 0 0 8px #ff1744;"></div>
            <span id="liveCount">0 Live</span>
        </div>
        <div class="stat offline">
            <div class="stat-dot" style="background: #666;"></div>
            <span id="offlineCount">0 Offline</span>
        </div>
        <div class="stat clubs">667 Clubs</div>
    </div>

    <div class="state-grid" id="stateGrid"></div>

    <!-- Overlays -->
    <div class="overlay" id="overlay"></div>
    
    <!-- Club Sheet -->
    <div class="bottom-sheet" id="clubSheet">
        <div class="sheet-handle"></div>
        <div class="sheet-header">
            <h2 class="sheet-title" id="clubSheetTitle"></h2>
            <p class="sheet-subtitle" id="clubSheetSubtitle"></p>
        </div>
        <div class="sheet-content" id="clubSheetContent"></div>
    </div>
    
    <!-- Streamer Sheet -->
    <div class="bottom-sheet" id="streamerSheet">
        <div class="sheet-handle"></div>
        <div class="sheet-header">
            <button class="back-btn" id="backBtn">‚Üê</button>
            <h2 class="sheet-title" id="streamerSheetTitle"></h2>
            <p class="sheet-subtitle" id="streamerSheetSubtitle"></p>
        </div>
        <div class="sheet-content" id="streamerSheetContent"></div>
    </div>

    <script>
        // DATA
        const CLUBS = {"AK":["Club SinRock","The Crazy Horse"],"AL":["Diamonds Gentlemen's Club","Paradise Gentlemen's Club"],"AR":["Centerfold","Cheyenne Gentlemen's Club"],"AZ":["Bandaids Showclub","Cheetahs Gentlemen's Club"],"CA":["Centerfolds","Cheetahs","Spearmint Rhino","Gold Club SF"],"CO":["Diamond Cabaret","PT's Showclub","Shotgun Willie's"],"CT":["Hollywood Cabaret","Pure Platinum"],"DE":["Cheeks","Fairways Inn"],"FL":["E11EVEN Miami","King of Diamonds (KOD)","Mons Venus","Tootsie's Cabaret"],"GA":["Magic City","Blue Flame Lounge","Clermont Lounge"],"HI":["Club 550","Club Femme Nu"],"IA":["Spearmint Rhino","Dancers Ranch"],"ID":["Stateline Showgirls","Satin Dolls"],"IL":["Larry Flynt's Hustler Club","Rick's Cabaret"],"IN":["Brad's Brass Flamingo","PT's Showclub"],"KS":["Baby Dolls","Executive Lounge"],"KY":["Spearmint Rhino","PT's Showclub"],"LA":["Larry Flynt's Hustler Club","Rick's Cabaret"],"MA":["Centerfolds","Glass Slipper","Golden Banana"],"MD":["Larry Flynt's Hustler Club","Rick's Cabaret"],"ME":["Platinum Plus"],"MI":["Flight Club","Penthouse Club","Henry the 8th"],"MN":["Rick's Cabaret","Spearmint Rhino"],"MO":["Club V","Crazyhorse"],"MS":["Babes Show Club","The Pony"],"MT":["Shotgun Willie's","Teasers GC"],"NC":["Rick's Cabaret","The Gold Club"],"ND":["The Northern"],"NE":["Club Omaha","The Foxy GC"],"NH":["Leather and Lace","Sugaz GC"],"NJ":["Satin Dolls","Delilah's Den"],"NM":["Spearmint Rhino","Fantasies"],"NV":["Sapphire Las Vegas","Spearmint Rhino","Little Darlings","Treasures"],"NY":["Hustler Club NYC","Rick's Cabaret NYC"],"OH":["Larry Flynt's Hustler Club","Columbus Gold"],"OK":["Night Trips Tulsa","Sensations"],"OR":["Acropolis Steakhouse","Mary's Club"],"PA":["Rick's Cabaret","Cheerleaders Philly"],"RI":["The Foxy Lady","Rhode Island Dolls"],"SC":["Platinum West","Cheetah Premier"],"SD":["Shotgun Willie's","Kongo Klub"],"TN":["Hustler Club","Deja Vu Showgirls"],"TX":["Rick's Cabaret DFW","The Men's Club","Baby Dolls"],"UT":["Southern X-Posure","The American Bush"],"VA":["Paper Moon","Pure Pleasure"],"VT":["The Den"],"WA":["Dream Girls at SoDo","Deja Vu Showgirls"],"WI":["Silk Exotic Madison","Peppermint Hippo"],"WV":["Southern X-Posure","The Filly"],"WY":["Green Door Lounge","Paradise Lounge"]};

        const STATE_NAMES = {AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"};

        const FIRST_NAMES = ["Amber","Crystal","Diamond","Jade","Ruby","Sapphire","Luna","Star","Angel","Heaven","Candy","Sugar","Honey","Cherry","Peach"];
        const LAST_NAMES = ["Rose","Sky","Star","Night","Dawn","Love","Dreams","Fire","Ice","Storm","Rain","Snow","Moon","Sun","Divine"];

        let counts = {};
        let allStreamers = [];
        let currentState = null;
        let currentClub = null;

        // Generate counts and streamers
        function init() {
            // Generate counts
            Object.keys(CLUBS).forEach(state => {
                const clubCount = CLUBS[state].length;
                counts[state] = {
                    live: Math.floor(Math.random() * Math.min(clubCount, 8)),
                    offline: Math.floor(Math.random() * Math.min(clubCount * 2, 15))
                };
            });

            // Generate all streamers
            Object.entries(CLUBS).forEach(([state, clubs]) => {
                clubs.forEach(club => {
                    const streamers = generateStreamers(club, state);
                    allStreamers.push(...streamers);
                });
            });

            renderStateGrid();
            updateStats();
        }

        // Generate streamers
        function generateStreamers(clubName, stateAbbr) {
            const seed = clubName.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
            const streamerCount = 3 + (seed % 6);
            const liveCount = Math.floor(Math.random() * Math.min(streamerCount, 4));
            
            const streamers = [];
            for (let i = 0; i < streamerCount; i++) {
                const firstName = FIRST_NAMES[((seed + i * 7) % FIRST_NAMES.length)];
                const lastName = LAST_NAMES[((seed + i * 13) % LAST_NAMES.length)];
                const isLive = i < liveCount;
                const hue = (seed + i * 30) % 360;
                
                streamers.push({
                    id: `${stateAbbr}-${clubName.replace(/[^a-zA-Z0-9]/g, '')}-${i}`,
                    name: `${firstName} ${lastName}`,
                    club: clubName,
                    state: stateAbbr,
                    isLive: isLive,
                    viewers: isLive ? Math.floor(Math.random() * 500) + 50 : 0,
                    avatar: firstName[0],
                    color: `hsl(${hue}, 70%, 50%)`
                });
            }
            
            return streamers;
        }

        // Render state grid
        function renderStateGrid() {
            const grid = document.getElementById('stateGrid');
            
            // Sort states: live first, then by state name
            const sortedStates = Object.keys(STATE_NAMES).sort((a, b) => {
                const aLive = counts[a]?.live || 0;
                const bLive = counts[b]?.live || 0;
                if (aLive > 0 && bLive === 0) return -1;
                if (bLive > 0 && aLive === 0) return 1;
                return STATE_NAMES[a].localeCompare(STATE_NAMES[b]);
            });
            
            grid.innerHTML = sortedStates.map(abbr => {
                const stateCounts = counts[abbr] || {live: 0, offline: 0};
                const clubCount = CLUBS[abbr]?.length || 0;
                
                return `
                    <div class="state-card ${stateCounts.live > 0 ? 'has-live' : ''}" onclick="openState('${abbr}')">
                        <div class="state-name">${STATE_NAMES[abbr]}</div>
                        <div class="state-counts">
                            ${stateCounts.live > 0 ? `<div class="count-item"><span class="count-live">üî¥ ${stateCounts.live}</span></div>` : ''}
                            ${stateCounts.offline > 0 ? `<div class="count-item"><span class="count-offline">‚ö´ ${stateCounts.offline}</span></div>` : ''}
                        </div>
                        <div class="state-clubs">${clubCount} clubs</div>
                    </div>
                `;
            }).join('');
        }

        // Update stats
        function updateStats() {
            const totalLive = Object.values(counts).reduce((sum, s) => sum + s.live, 0);
            const totalOffline = Object.values(counts).reduce((sum, s) => sum + s.offline, 0);
            
            document.getElementById('liveCount').textContent = `${totalLive} Live`;
            document.getElementById('offlineCount').textContent = `${totalOffline} Offline`;
        }

        // Search functionality
        const searchBar = document.getElementById('searchBar');
        const searchResults = document.getElementById('searchResults');

        searchBar.addEventListener('input', (e) => {
            const query = e.target.value.trim().toLowerCase();
            
            if (!query) {
                searchResults.classList.remove('visible');
                return;
            }

            // Search states
            const matchingStates = Object.entries(STATE_NAMES)
                .filter(([abbr, name]) => 
                    name.toLowerCase().includes(query) || 
                    abbr.toLowerCase().includes(query)
                )
                .slice(0, 5);

            // Search clubs
            const matchingClubs = [];
            Object.entries(CLUBS).forEach(([state, clubs]) => {
                clubs.forEach(club => {
                    if (club.toLowerCase().includes(query)) {
                        matchingClubs.push({ name: club, state });
                    }
                });
            });
            const limitedClubs = matchingClubs.slice(0, 5);

            // Search streamers
            const matchingStreamers = allStreamers
                .filter(s => s.name.toLowerCase().includes(query))
                .slice(0, 5);

            // Build results HTML
            let html = '';

            if (matchingStates.length > 0) {
                html += '<div class="search-category">üó∫Ô∏è States</div>';
                matchingStates.forEach(([abbr, name]) => {
                    const stateCounts = counts[abbr] || {live: 0, offline: 0};
                    html += `
                        <div class="search-item" onclick="selectState('${abbr}')">
                            <div class="search-icon">üó∫Ô∏è</div>
                            <div class="search-item-info">
                                <div class="search-item-name">${name}</div>
                                <div class="search-item-meta">${stateCounts.live} live ‚Ä¢ ${stateCounts.offline} offline</div>
                            </div>
                            ${stateCounts.live > 0 ? '<div class="search-live-badge">LIVE</div>' : ''}
                        </div>
                    `;
                });
            }

            if (limitedClubs.length > 0) {
                html += '<div class="search-category">üè¢ Clubs</div>';
                limitedClubs.forEach(club => {
                    html += `
                        <div class="search-item" onclick="selectClub('${club.name.replace(/'/g, "\\'")}', '${club.state}')">
                            <div class="search-icon">üè¢</div>
                            <div class="search-item-info">
                                <div class="search-item-name">${club.name}</div>
                                <div class="search-item-meta">${STATE_NAMES[club.state]}</div>
                            </div>
                        </div>
                    `;
                });
            }

            if (matchingStreamers.length > 0) {
                html += '<div class="search-category">üë§ Streamers</div>';
                matchingStreamers.forEach(s => {
                    html += `
                        <div class="search-item" onclick="selectStreamer('${s.id}', ${s.isLive})">
                            <div class="search-icon">üë§</div>
                            <div class="search-item-info">
                                <div class="search-item-name">${s.name}</div>
                                <div class="search-item-meta">${s.club}, ${STATE_NAMES[s.state]}</div>
                            </div>
                            ${s.isLive ? '<div class="search-live-badge">LIVE</div>' : ''}
                        </div>
                    `;
                });
            }

            if (!html) {
                html = '<div class="no-results">No results found</div>';
            }

            searchResults.innerHTML = html;
            searchResults.classList.add('visible');
        });

        // Close search results when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                searchResults.classList.remove('visible');
            }
        });

        // Select from search
        function selectState(abbr) {
            searchBar.value = '';
            searchResults.classList.remove('visible');
            openState(abbr);
        }

        function selectClub(clubName, stateAbbr) {
            searchBar.value = '';
            searchResults.classList.remove('visible');
            openClub(clubName, stateAbbr);
        }

        function selectStreamer(id, isLive) {
            searchBar.value = '';
            searchResults.classList.remove('visible');
            openStreamer(id, isLive);
        }

        // Open state
        function openState(abbr) {
            currentState = abbr;
            const clubs = CLUBS[abbr] || [];
            const stateCounts = counts[abbr] || {live: 0, offline: 0};
            
            document.getElementById('clubSheetTitle').textContent = STATE_NAMES[abbr];
            document.getElementById('clubSheetSubtitle').textContent = `${clubs.length} clubs ‚Ä¢ ${stateCounts.live} live ‚Ä¢ Tap to see streamers`;
            
            const clubsWithStatus = clubs.map((club, i) => ({
                name: club,
                isLive: i < stateCounts.live,
                viewers: i < stateCounts.live ? Math.floor(Math.random() * 500) + 50 : 0
            }));
            
            document.getElementById('clubSheetContent').innerHTML = clubsWithStatus.map(club => `
                <div class="item ${club.isLive ? 'live' : ''}" onclick="openClub('${club.name.replace(/'/g, "\\'")}', '${abbr}')">
                    <div>
                        <div class="item-name ${club.isLive ? 'live' : ''}">${club.name}</div>
                        ${!club.isLive ? '<div class="item-status">Offline</div>' : ''}
                    </div>
                    ${club.isLive ? `
                        <div class="live-badge">
                            <div class="pulse-dot"></div>
                            <span>${club.viewers} watching</span>
                        </div>
                    ` : ''}
                </div>
            `).join('');
            
            document.getElementById('overlay').classList.add('visible');
            document.getElementById('clubSheet').classList.add('open');
        }

        // Open club
        function openClub(clubName, stateAbbr) {
            currentClub = clubName;
            const streamers = generateStreamers(clubName, stateAbbr);
            const liveStreamers = streamers.filter(s => s.isLive);
            const offlineStreamers = streamers.filter(s => !s.isLive);
            
            document.getElementById('streamerSheetTitle').textContent = clubName;
            document.getElementById('streamerSheetSubtitle').textContent = `${STATE_NAMES[stateAbbr]} ‚Ä¢ ${liveStreamers.length} live ‚Ä¢ ${offlineStreamers.length} offline`;
            
            let html = '';
            
            if (liveStreamers.length > 0) {
                html += `<div class="section-header live">üî¥ LIVE NOW (${liveStreamers.length})</div>`;
                html += liveStreamers.map(s => `
                    <div class="item live" onclick="openStreamer('${s.id}', true)">
                        <div class="streamer-item">
                            <div class="streamer-avatar live" style="background: ${s.color}">${s.avatar}</div>
                            <div class="streamer-info">
                                <div class="streamer-name live">${s.name}</div>
                                <div class="streamer-viewers">üëÅÔ∏è ${s.viewers} watching</div>
                            </div>
                        </div>
                        <div class="streamer-icon" style="color: #ff1744;">‚ñ∂</div>
                    </div>
                `).join('');
            }
            
            if (offlineStreamers.length > 0) {
                html += `<div class="section-header offline">‚ö´ OFFLINE (${offlineStreamers.length})</div>`;
                html += offlineStreamers.map(s => `
                    <div class="item" onclick="openStreamer('${s.id}', false)" style="opacity: 0.7;">
                        <div class="streamer-item">
                            <div class="streamer-avatar offline" style="background: ${s.color}">${s.avatar}</div>
                            <div class="streamer-info">
                                <div class="streamer-name offline">${s.name}</div>
                                <div class="streamer-viewers" style="color: #666;">Tap to view profile</div>
                            </div>
                        </div>
                        <div class="streamer-icon" style="color: #666;">üë§</div>
                    </div>
                `).join('');
            }
            
            document.getElementById('streamerSheetContent').innerHTML = html;
            
            document.getElementById('clubSheet').classList.remove('open');
            document.getElementById('streamerSheet').classList.add('open');
        }

        // Open streamer
        function openStreamer(id, isLive) {
            const streamer = allStreamers.find(s => s.id === id);
            if (isLive) {
                // Open Demo 2 to room
                window.open('demo-2-standalone.html', '_blank');
            } else {
                // Open Demo 2 to profile page with streamer info
                localStorage.setItem('viewProfile', JSON.stringify({
                    name: streamer.name,
                    avatar: streamer.avatar,
                    color: streamer.color
                }));
                window.open('demo-2-standalone.html', '_blank');
            }
        }

        // Back button
        document.getElementById('backBtn').onclick = () => {
            document.getElementById('streamerSheet').classList.remove('open');
            document.getElementById('clubSheet').classList.add('open');
        };

        // Close overlay
        document.getElementById('overlay').onclick = () => {
            document.getElementById('overlay').classList.remove('visible');
            document.getElementById('clubSheet').classList.remove('open');
            document.getElementById('streamerSheet').classList.remove('open');
        };

        // Initialize
        init();
        
        // Update counts every 10 seconds
        setInterval(() => {
            Object.keys(CLUBS).forEach(state => {
                const clubCount = CLUBS[state].length;
                counts[state] = {
                    live: Math.floor(Math.random() * Math.min(clubCount, 8)),
                    offline: Math.floor(Math.random() * Math.min(clubCount * 2, 15))
                };
            });
            renderStateGrid();
            updateStats();
        }, 10000);
    </script>
</body>
</html>
